[buildout]
extends =
    ../versions/base.cfg
find-links =
    pypi-local/

extends-cache = cache
versions = versions
parts =
    eve
    alembic
    alembic-ini
    var
eggs =
    penelope.api
show-picked-versions = true

[ports]
eve = 9350

[hosts]
eve = 127.0.0.1

[settings]
db_string = postgresql://postgres:postgres@localhost:5432/penelope
server_name = localhost:9350
debug = 0

[alembic]
recipe = zc.recipe.egg
eggs =
    alembic
    ${buildout:eggs}
initialization =
    sys.argv = sys.argv[:1] + ['-c', '${buildout:directory}/etc/alembic.ini'] + sys.argv[1:]

[alembic-ini]
recipe = collective.recipe.template[genshi]:genshi
input = ${buildout:directory}/templates/alembic.ini.in
output = ${buildout:directory}/etc/alembic.ini

[var]
recipe = z3c.recipe.mkdir
paths = var/log

[eve]
recipe = zc.recipe.egg
eggs =
    penelope.api
initialization = 
 import os
 os.environ['PORT'] = '${ports:eve}'
 os.environ['HOST'] = '${hosts:eve}'
 os.environ['EVE_DEBUG'] = '${settings:debug}'
 os.environ['SERVER_NAME'] = '${settings:server_name}'
 os.environ['SQLALCHEMY_DATABASE_URI'] = '${settings:db_string}'
