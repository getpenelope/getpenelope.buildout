[buildout]
extends =
    ../versions/base.cfg
find-links =
    pypi-local/

extends-cache = cache
versions = versions
parts =
    alembic
    alembic-ini
    penelope-ini
    pyramid
    var
eggs =
    penelope.api
    penelope.models
show-picked-versions = true

[ports]
pyramid = 8080
mail = 25

[hosts]
pyramid = 127.0.0.1
mail = 127.0.0.1

[settings]
db_string = postgresql://postgres:postgres@localhost:5432/dashboard
db_echo = true
jdbc_url = 
jdbc_user = 
jdbc_password = 
solr =

[alembic]
recipe = zc.recipe.egg
eggs =
    alembic
    ${buildout:eggs}
initialization =
    sys.argv = sys.argv[:1] + ['-c', '${buildout:directory}/etc/alembic.ini'] + sys.argv[1:]

[alembic-ini]
recipe = collective.recipe.template[genshi]:genshi
input = ${buildout:directory}/templates/alembic.ini.in
output = ${buildout:directory}/etc/alembic.ini

[penelope-ini]
recipe = collective.recipe.template[genshi]:genshi
input = ${buildout:directory}/templates/production.ini.in
output = ${buildout:directory}/etc/production.ini

[pyramid]
recipe = zc.recipe.egg
initialization =
    import os
    from gevent import monkey; monkey.patch_all()
eggs =
    pyramid
    gevent-socketio
    ${buildout:eggs}

[var]
recipe = z3c.recipe.mkdir
paths = var/log
